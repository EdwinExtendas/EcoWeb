/* @preserve
 * The MIT License (MIT)
 *
 * Copyright (c) 2013-2015 Petka Antonov
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */
/**
 * bluebird build version 3.3.4
 * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, using, timers, filter, any, each
*/
!(function (t) { if (typeof exports === 'object' && typeof module !== 'undefined') { module.exports = t() } else if (typeof define === 'function' && define.amd) { define([], t) } else { let e; typeof window !== 'undefined' ? e = window : typeof global !== 'undefined' ? e = global : typeof self !== 'undefined' && (e = self), e.Promise = t() } }(function () {
  let t, e, n; return (function r (t, e, n) { function i (s, a) { if (!e[s]) { if (!t[s]) { const c = typeof _dereq_ === 'function' && _dereq_; if (!a && c) { return c(s, !0) } if (o) { return o(s, !0) } const l = new Error("Cannot find module '" + s + "'"); throw l.code = 'MODULE_NOT_FOUND', l } const u = e[s] = { exports: {} }; t[s][0].call(u.exports, function (e) { const n = t[s][1][e]; return i(n || e) }, u, u.exports, r, t, e, n) } return e[s].exports } for (var o = typeof _dereq_ === 'function' && _dereq_, s = 0; s < n.length; s++) { i(n[s]) } return i }({
    1: [function (t, e, n) { 'use strict'; e.exports = function (t) { function e (t) { const e = new n(t); const r = e.promise(); return e.setHowMany(1), e.setUnwrap(), e.init(), r } var n = t._SomePromiseArray; t.any = function (t) { return e(t) }, t.prototype.any = function () { return e(this) } } }, {}],
    2: [function (t, e, n) { 'use strict'; function r () { this._isTickUsed = !1, this._lateQueue = new u(16), this._normalQueue = new u(16), this._haveDrainedQueues = !1, this._trampolineEnabled = !0; const t = this; this.drainQueues = function () { t._drainQueues() }, this._schedule = l } function i (t, e, n) { this._lateQueue.push(t, e, n), this._queueTick() } function o (t, e, n) { this._normalQueue.push(t, e, n), this._queueTick() } function s (t) { this._normalQueue._pushOne(t), this._queueTick() } let a; try { throw new Error() } catch (c) { a = c } var l = t('./schedule'); var u = t('./queue'); const p = t('./util'); r.prototype.enableTrampoline = function () { this._trampolineEnabled = !0 }, r.prototype.disableTrampolineIfNecessary = function () { p.hasDevTools && (this._trampolineEnabled = !1) }, r.prototype.haveItemsQueued = function () { return this._isTickUsed || this._haveDrainedQueues }, r.prototype.fatalError = function (t, e) { e ? (process.stderr.write('Fatal ' + (t instanceof Error ? t.stack : t) + '\n'), process.exit(2)) : this.throwLater(t) }, r.prototype.throwLater = function (t, e) { if (arguments.length === 1 && (e = t, t = function () { throw e }), typeof setTimeout !== 'undefined') { setTimeout(function () { t(e) }, 0) } else { try { this._schedule(function () { t(e) }) } catch (n) { throw new Error('No async scheduler available\n\n    See http://goo.gl/MqrFmX\n') } } }, p.hasDevTools ? (r.prototype.invokeLater = function (t, e, n) { this._trampolineEnabled ? i.call(this, t, e, n) : this._schedule(function () { setTimeout(function () { t.call(e, n) }, 100) }) }, r.prototype.invoke = function (t, e, n) { this._trampolineEnabled ? o.call(this, t, e, n) : this._schedule(function () { t.call(e, n) }) }, r.prototype.settlePromises = function (t) { this._trampolineEnabled ? s.call(this, t) : this._schedule(function () { t._settlePromises() }) }) : (r.prototype.invokeLater = i, r.prototype.invoke = o, r.prototype.settlePromises = s), r.prototype.invokeFirst = function (t, e, n) { this._normalQueue.unshift(t, e, n), this._queueTick() }, r.prototype._drainQueue = function (t) { for (;t.length() > 0;) { const e = t.shift(); if (typeof e === 'function') { const n = t.shift(); const r = t.shift(); e.call(n, r) } else { e._settlePromises() } } }, r.prototype._drainQueues = function () { this._drainQueue(this._normalQueue), this._reset(), this._haveDrainedQueues = !0, this._drainQueue(this._lateQueue) }, r.prototype._queueTick = function () { this._isTickUsed || (this._isTickUsed = !0, this._schedule(this.drainQueues)) }, r.prototype._reset = function () { this._isTickUsed = !1 }, e.exports = r, e.exports.firstLineError = a }, { './queue': 26, './schedule': 29, './util': 36 }],
    3: [function (t, e, n) { 'use strict'; e.exports = function (t, e, n, r) { let i = !1; const o = function (t, e) { this._reject(e) }; const s = function (t, e) { e.promiseRejectionQueued = !0, e.bindingPromise._then(o, o, null, this, t) }; const a = function (t, e) { (50397184 & this._bitField) === 0 && this._resolveCallback(e.target) }; const c = function (t, e) { e.promiseRejectionQueued || this._reject(t) }; t.prototype.bind = function (o) { i || (i = !0, t.prototype._propagateFrom = r.propagateFromFunction(), t.prototype._boundValue = r.boundValueFunction()); const l = n(o); const u = new t(e); u._propagateFrom(this, 1); const p = this._target(); if (u._setBoundTo(l), l instanceof t) { const h = { promiseRejectionQueued: !1, promise: u, target: p, bindingPromise: l }; p._then(e, s, void 0, u, h), l._then(a, c, void 0, u, h), u._setOnCancel(l) } else { u._resolveCallback(p) } return u }, t.prototype._setBoundTo = function (t) { void 0 !== t ? (this._bitField = 2097152 | this._bitField, this._boundTo = t) : this._bitField = -2097153 & this._bitField }, t.prototype._isBound = function () { return (2097152 & this._bitField) === 2097152 }, t.bind = function (e, n) { return t.resolve(n).bind(e) } } }, {}],
    4: [function (t, e, n) { 'use strict'; function r () { try { Promise === o && (Promise = i) } catch (t) {} return o } let i; typeof Promise !== 'undefined' && (i = Promise); var o = t('./promise')(); o.noConflict = r, e.exports = o }, { './promise': 22 }],
    5: [function (t, e, n) { 'use strict'; const r = Object.create; if (r) { const i = r(null); const o = r(null); i[' size'] = o[' size'] = 0 }e.exports = function (e) { function n (t, n) { let r; if (t != null && (r = t[n]), typeof r !== 'function') { const i = 'Object ' + a.classString(t) + " has no method '" + a.toString(n) + "'"; throw new e.TypeError(i) } return r } function r (t) { const e = this.pop(); const r = n(t, e); return r.apply(t, this) } function i (t) { return t[this] } function o (t) { let e = +this; return e < 0 && (e = Math.max(0, e + t.length)), t[e] } let s; var a = t('./util'); const c = a.canEvaluate; a.isIdentifier; e.prototype.call = function (t) { const e = [].slice.call(arguments, 1); return e.push(t), this._then(r, void 0, void 0, e, void 0) }, e.prototype.get = function (t) { let e; const n = typeof t === 'number'; if (n) { e = o } else if (c) { const r = s(t); e = r !== null ? r : i } else { e = i } return this._then(e, void 0, void 0, t, void 0) } } }, { './util': 36 }],
    6: [function (t, e, n) { 'use strict'; e.exports = function (e, n, r, i) { const o = t('./util'); const s = o.tryCatch; const a = o.errorObj; const c = e._async; e.prototype.break = e.prototype.cancel = function () { if (!i.cancellation()) { return this._warn('cancellation is disabled') } for (let t = this, e = t; t.isCancellable();) { if (!t._cancelBy(e)) { e._isFollowing() ? e._followee().cancel() : e._cancelBranched(); break } const n = t._cancellationParent; if (n == null || !n.isCancellable()) { t._isFollowing() ? t._followee().cancel() : t._cancelBranched(); break }t._isFollowing() && t._followee().cancel(), e = t, t = n } }, e.prototype._branchHasCancelled = function () { this._branchesRemainingToCancel-- }, e.prototype._enoughBranchesHaveCancelled = function () { return void 0 === this._branchesRemainingToCancel || this._branchesRemainingToCancel <= 0 }, e.prototype._cancelBy = function (t) { return t === this ? (this._branchesRemainingToCancel = 0, this._invokeOnCancel(), !0) : (this._branchHasCancelled(), this._enoughBranchesHaveCancelled() ? (this._invokeOnCancel(), !0) : !1) }, e.prototype._cancelBranched = function () { this._enoughBranchesHaveCancelled() && this._cancel() }, e.prototype._cancel = function () { this.isCancellable() && (this._setCancelled(), c.invoke(this._cancelPromises, this, void 0)) }, e.prototype._cancelPromises = function () { this._length() > 0 && this._settlePromises() }, e.prototype._unsetOnCancel = function () { this._onCancelField = void 0 }, e.prototype.isCancellable = function () { return this.isPending() && !this.isCancelled() }, e.prototype._doInvokeOnCancel = function (t, e) { if (o.isArray(t)) { for (let n = 0; n < t.length; ++n) { this._doInvokeOnCancel(t[n], e) } } else if (void 0 !== t) { if (typeof t === 'function') { if (!e) { const r = s(t).call(this._boundValue()); r === a && (this._attachExtraTrace(r.e), c.throwLater(r.e)) } } else { t._resultCancelled(this) } } }, e.prototype._invokeOnCancel = function () { const t = this._onCancel(); this._unsetOnCancel(), c.invoke(this._doInvokeOnCancel, this, t) }, e.prototype._invokeInternalOnCancel = function () { this.isCancellable() && (this._doInvokeOnCancel(this._onCancel(), !0), this._unsetOnCancel()) }, e.prototype._resultCancelled = function () { this.cancel() } } }, { './util': 36 }],
    7: [function (t, e, n) { 'use strict'; e.exports = function (e) { function n (t, n, a) { return function (c) { const l = a._boundValue(); t:for (let u = 0; u < t.length; ++u) { const p = t[u]; if (p === Error || p != null && p.prototype instanceof Error) { if (c instanceof p) { return o(n).call(l, c) } } else if (typeof p === 'function') { const h = o(p).call(l, c); if (h === s) { return h } if (h) { return o(n).call(l, c) } } else if (r.isObject(c)) { for (let f = i(p), _ = 0; _ < f.length; ++_) { const d = f[_]; if (p[d] != c[d]) { continue t } } return o(n).call(l, c) } } return e } } var r = t('./util'); var i = t('./es5').keys; var o = r.tryCatch; var s = r.errorObj; return n } }, { './es5': 13, './util': 36 }],
    8: [function (t, e, n) { 'use strict'; e.exports = function (t) { function e () { this._trace = new e.CapturedTrace(r()) } function n () { return i ? new e() : void 0 } function r () { const t = o.length - 1; return t >= 0 ? o[t] : void 0 } var i = !1; var o = []; return t.prototype._promiseCreated = function () {}, t.prototype._pushContext = function () {}, t.prototype._popContext = function () { return null }, t._peekContext = t.prototype._peekContext = function () {}, e.prototype._pushContext = function () { void 0 !== this._trace && (this._trace._promiseCreated = null, o.push(this._trace)) }, e.prototype._popContext = function () { if (void 0 !== this._trace) { const t = o.pop(); const e = t._promiseCreated; return t._promiseCreated = null, e } return null }, e.CapturedTrace = null, e.create = n, e.deactivateLongStackTraces = function () {}, e.activateLongStackTraces = function () { const n = t.prototype._pushContext; const o = t.prototype._popContext; const s = t._peekContext; const a = t.prototype._peekContext; const c = t.prototype._promiseCreated; e.deactivateLongStackTraces = function () { t.prototype._pushContext = n, t.prototype._popContext = o, t._peekContext = s, t.prototype._peekContext = a, t.prototype._promiseCreated = c, i = !1 }, i = !0, t.prototype._pushContext = e.prototype._pushContext, t.prototype._popContext = e.prototype._popContext, t._peekContext = t.prototype._peekContext = r, t.prototype._promiseCreated = function () { const t = this._peekContext(); t && t._promiseCreated == null && (t._promiseCreated = this) } }, e } }, {}],
    9: [function (t, e, n) { 'use strict'; e.exports = function (e, n) { function r (t, e) { return { promise: e } } function i () { return !1 } function o (t, e, n) { const r = this; try { t(e, n, function (t) { if (typeof t !== 'function') { throw new TypeError('onCancel must be a function, got: ' + H.toString(t)) } r._attachCancellationCallback(t) }) } catch (i) { return i } } function s (t) { if (!this.isCancellable()) { return this } const e = this._onCancel(); void 0 !== e ? H.isArray(e) ? e.push(t) : this._setOnCancel([e, t]) : this._setOnCancel(t) } function a () { return this._onCancelField } function c (t) { this._onCancelField = t } function l () { this._cancellationParent = void 0, this._onCancelField = void 0 } function u (t, e) { if ((1 & e) !== 0) { this._cancellationParent = t; let n = t._branchesRemainingToCancel; void 0 === n && (n = 0), t._branchesRemainingToCancel = n + 1 }(2 & e) !== 0 && t._isBound() && this._setBoundTo(t._boundTo) } function p (t, e) { (2 & e) !== 0 && t._isBound() && this._setBoundTo(t._boundTo) } function h () { const t = this._boundTo; return void 0 !== t && t instanceof e ? t.isFulfilled() ? t.value() : void 0 : t } function f () { this._trace = new O(this._peekContext()) } function _ (t, e) { if (N(t)) { let n = this._trace; if (void 0 !== n && e && (n = n._parent), void 0 !== n) { n.attachExtraTrace(t) } else if (!t.__stackCleaned__) { const r = j(t); H.notEnumerableProp(t, 'stack', r.message + '\n' + r.stack.join('\n')), H.notEnumerableProp(t, '__stackCleaned__', !0) } } } function d (t, e, n, r, i) { if (void 0 === t && e !== null && z) { if (void 0 !== i && i._returnedNonUndefined()) { return } const o = r._bitField; if ((65535 & o) === 0) { return } n && (n += ' '); const s = 'a promise was created in a ' + n + 'handler but was not returned from it'; r._warn(s, !0, e) } } function v (t, e) { let n = t + ' is deprecated and will be removed in a future version.'; return e && (n += ' Use ' + e + ' instead.'), y(n) } function y (t, n, r) { if (rt.warnings) { let i; const o = new L(t); if (n) { r._attachExtraTrace(o) } else if (rt.longStackTraces && (i = e._peekContext())) { i.attachExtraTrace(o) } else { const s = j(o); o.stack = s.message + '\n' + s.stack.join('\n') }Y('warning', o) || k(o, '', !0) } } function g (t, e) { for (var n = 0; n < e.length - 1; ++n) { e[n].push('From previous event:'), e[n] = e[n].join('\n') } return n < e.length && (e[n] = e[n].join('\n')), t + '\n' + e.join('\n') } function m (t) { for (let e = 0; e < t.length; ++e) { (t[e].length === 0 || e + 1 < t.length && t[e][0] === t[e + 1][0]) && (t.splice(e, 1), e--) } } function b (t) { for (let e = t[0], n = 1; n < t.length; ++n) { for (var r = t[n], i = e.length - 1, o = e[i], s = -1, a = r.length - 1; a >= 0; --a) { if (r[a] === o) { s = a; break } } for (var a = s; a >= 0; --a) { const c = r[a]; if (e[i] !== c) { break } e.pop(), i-- }e = r } } function w (t) { for (var e = [], n = 0; n < t.length; ++n) { let r = t[n]; const i = r === '    (No stack trace)' || B.test(r); const o = i && tt(r); i && !o && (q && r.charAt(0) !== ' ' && (r = '    ' + r), e.push(r)) } return e } function C (t) { for (var e = t.stack.replace(/\s+$/g, '').split('\n'), n = 0; n < e.length; ++n) { const r = e[n]; if (r === '    (No stack trace)' || B.test(r)) { break } } return n > 0 && (e = e.slice(n)), e } function j (t) { let e = t.stack; const n = t.toString(); return e = typeof e === 'string' && e.length > 0 ? C(t) : ['    (No stack trace)'], { message: n, stack: w(e) } } function k (t, e, n) { if (typeof console !== 'undefined') { let r; if (H.isObject(t)) { const i = t.stack; r = e + M(i, t) } else { r = e + String(t) } typeof D === 'function' ? D(r, n) : (typeof console.log === 'function' || typeof console.log === 'object') && console.log(r) } } function E (t, e, n, r) { let i = !1; try { typeof e === 'function' && (i = !0, t === 'rejectionHandled' ? e(r) : e(n, r)) } catch (o) { I.throwLater(o) }t === 'unhandledRejection' ? Y(t, n, r) || i || k(n, 'Unhandled rejection ') : Y(t, r) } function F (t) { let e; if (typeof t === 'function') { e = '[function ' + (t.name || 'anonymous') + ']' } else { e = t && typeof t.toString === 'function' ? t.toString() : H.toString(t); const n = /\[object [a-zA-Z0-9$_]+\]/; if (n.test(e)) { try { const r = JSON.stringify(t); e = r } catch (i) {} }e.length === 0 && (e = '(empty array)') } return '(<' + x(e) + '>, no stack trace)' } function x (t) { const e = 41; return t.length < e ? t : t.substr(0, e - 3) + '...' } function T () { return typeof nt === 'function' } function R (t) { const e = t.match(et); return e ? { fileName: e[1], line: parseInt(e[2], 10) } : void 0 } function P (t, e) { if (T()) { for (var n, r, i = t.stack.split('\n'), o = e.stack.split('\n'), s = -1, a = -1, c = 0; c < i.length; ++c) { var l = R(i[c]); if (l) { n = l.fileName, s = l.line; break } } for (var c = 0; c < o.length; ++c) { var l = R(o[c]); if (l) { r = l.fileName, a = l.line; break } }s < 0 || a < 0 || !n || !r || n !== r || s >= a || (tt = function (t) { if (U.test(t)) { return !0 } const e = R(t); return e && e.fileName === n && s <= e.line && e.line <= a ? !0 : !1 }) } } function O (t) { this._parent = t, this._promisesCreated = 0; const e = this._length = 1 + (void 0 === t ? 0 : t._length); nt(this, O), e > 32 && this.uncycle() } let S; let A; let D; const V = e._getDomain; var I = e._async; var L = t('./errors').Warning; var H = t('./util'); var N = H.canAttachTrace; var U = /[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/; var B = null; var M = null; var q = !1; const Q = !(H.env('BLUEBIRD_DEBUG') == 0 || !H.env('BLUEBIRD_DEBUG') && H.env('NODE_ENV') !== 'development'); const $ = !(H.env('BLUEBIRD_WARNINGS') == 0 || !Q && !H.env('BLUEBIRD_WARNINGS')); const G = !(H.env('BLUEBIRD_LONG_STACK_TRACES') == 0 || !Q && !H.env('BLUEBIRD_LONG_STACK_TRACES')); var z = H.env('BLUEBIRD_W_FORGOTTEN_RETURN') != 0 && ($ || !!H.env('BLUEBIRD_W_FORGOTTEN_RETURN')); e.prototype.suppressUnhandledRejections = function () { const t = this._target(); t._bitField = -1048577 & t._bitField | 524288 }, e.prototype._ensurePossibleRejectionHandled = function () { (524288 & this._bitField) === 0 && (this._setRejectionIsUnhandled(), I.invokeLater(this._notifyUnhandledRejection, this, void 0)) }, e.prototype._notifyUnhandledRejectionIsHandled = function () { E('rejectionHandled', S, void 0, this) }, e.prototype._setReturnedNonUndefined = function () { this._bitField = 268435456 | this._bitField }, e.prototype._returnedNonUndefined = function () { return (268435456 & this._bitField) !== 0 }, e.prototype._notifyUnhandledRejection = function () { if (this._isRejectionUnhandled()) { const t = this._settledValue(); this._setUnhandledRejectionIsNotified(), E('unhandledRejection', A, t, this) } }, e.prototype._setUnhandledRejectionIsNotified = function () { this._bitField = 262144 | this._bitField }, e.prototype._unsetUnhandledRejectionIsNotified = function () { this._bitField = -262145 & this._bitField }, e.prototype._isUnhandledRejectionNotified = function () { return (262144 & this._bitField) > 0 }, e.prototype._setRejectionIsUnhandled = function () { this._bitField = 1048576 | this._bitField }, e.prototype._unsetRejectionIsUnhandled = function () { this._bitField = -1048577 & this._bitField, this._isUnhandledRejectionNotified() && (this._unsetUnhandledRejectionIsNotified(), this._notifyUnhandledRejectionIsHandled()) }, e.prototype._isRejectionUnhandled = function () { return (1048576 & this._bitField) > 0 }, e.prototype._warn = function (t, e, n) { return y(t, e, n || this) }, e.onPossiblyUnhandledRejection = function (t) { const e = V(); A = typeof t === 'function' ? e === null ? t : e.bind(t) : void 0 }, e.onUnhandledRejectionHandled = function (t) { const e = V(); S = typeof t === 'function' ? e === null ? t : e.bind(t) : void 0 }; let X = function () {}; e.longStackTraces = function () { if (I.haveItemsQueued() && !rt.longStackTraces) { throw new Error('cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n') } if (!rt.longStackTraces && T()) { const t = e.prototype._captureStackTrace; const r = e.prototype._attachExtraTrace; rt.longStackTraces = !0, X = function () { if (I.haveItemsQueued() && !rt.longStackTraces) { throw new Error('cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n') } e.prototype._captureStackTrace = t, e.prototype._attachExtraTrace = r, n.deactivateLongStackTraces(), I.enableTrampoline(), rt.longStackTraces = !1 }, e.prototype._captureStackTrace = f, e.prototype._attachExtraTrace = _, n.activateLongStackTraces(), I.disableTrampolineIfNecessary() } }, e.hasLongStackTraces = function () { return rt.longStackTraces && T() }; const W = (function () { try { const t = document.createEvent('CustomEvent'); return t.initCustomEvent('testingtheevent', !1, !0, {}), H.global.dispatchEvent(t), function (t, e) { const n = document.createEvent('CustomEvent'); return n.initCustomEvent(t.toLowerCase(), !1, !0, e), !H.global.dispatchEvent(n) } } catch (e) {} return function () { return !1 } }()); const K = (function () { return H.isNode ? function () { return process.emit.apply(process, arguments) } : H.global ? function (t) { const e = 'on' + t.toLowerCase(); const n = H.global[e]; return n ? (n.apply(H.global, [].slice.call(arguments, 1)), !0) : !1 } : function () { return !1 } }()); const J = { promiseCreated: r, promiseFulfilled: r, promiseRejected: r, promiseResolved: r, promiseCancelled: r, promiseChained (t, e, n) { return { promise: e, child: n } }, warning (t, e) { return { warning: e } }, unhandledRejection (t, e, n) { return { reason: e, promise: n } }, rejectionHandled: r }; var Y = function (t) { let e = !1; try { e = K.apply(null, arguments) } catch (n) { I.throwLater(n), e = !0 } let r = !1; try { r = W(t, J[t].apply(null, arguments)) } catch (n) { I.throwLater(n), r = !0 } return r || e }; e.config = function (t) { if (t = Object(t), 'longStackTraces' in t && (t.longStackTraces ? e.longStackTraces() : !t.longStackTraces && e.hasLongStackTraces() && X()), 'warnings' in t) { const n = t.warnings; rt.warnings = !!n, z = rt.warnings, H.isObject(n) && 'wForgottenReturn' in n && (z = !!n.wForgottenReturn) } if ('cancellation' in t && t.cancellation && !rt.cancellation) { if (I.haveItemsQueued()) { throw new Error('cannot enable cancellation after promises are in use') } e.prototype._clearCancellationData = l, e.prototype._propagateFrom = u, e.prototype._onCancel = a, e.prototype._setOnCancel = c, e.prototype._attachCancellationCallback = s, e.prototype._execute = o, Z = u, rt.cancellation = !0 }'monitoring' in t && (t.monitoring && !rt.monitoring ? (rt.monitoring = !0, e.prototype._fireEvent = Y) : !t.monitoring && rt.monitoring && (rt.monitoring = !1, e.prototype._fireEvent = i)) }, e.prototype._fireEvent = i, e.prototype._execute = function (t, e, n) { try { t(e, n) } catch (r) { return r } }, e.prototype._onCancel = function () {}, e.prototype._setOnCancel = function (t) {}, e.prototype._attachCancellationCallback = function (t) {}, e.prototype._captureStackTrace = function () {}, e.prototype._attachExtraTrace = function () {}, e.prototype._clearCancellationData = function () {}, e.prototype._propagateFrom = function (t, e) {}; var Z = p; var tt = function () { return !1 }; var et = /[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/; H.inherits(O, Error), n.CapturedTrace = O, O.prototype.uncycle = function () { let t = this._length; if (!(t < 2)) { for (var e = [], n = {}, r = 0, i = this; void 0 !== i; ++r) { e.push(i), i = i._parent }t = this._length = r; for (var r = t - 1; r >= 0; --r) { const o = e[r].stack; void 0 === n[o] && (n[o] = r) } for (var r = 0; t > r; ++r) { const s = e[r].stack; const a = n[s]; if (void 0 !== a && a !== r) { a > 0 && (e[a - 1]._parent = void 0, e[a - 1]._length = 1), e[r]._parent = void 0, e[r]._length = 1; const c = r > 0 ? e[r - 1] : this; t - 1 > a ? (c._parent = e[a + 1], c._parent.uncycle(), c._length = c._parent._length + 1) : (c._parent = void 0, c._length = 1); for (let l = c._length + 1, u = r - 2; u >= 0; --u) { e[u]._length = l, l++ } return } } } }, O.prototype.attachExtraTrace = function (t) { if (!t.__stackCleaned__) { this.uncycle(); for (var e = j(t), n = e.message, r = [e.stack], i = this; void 0 !== i;) { r.push(w(i.stack.split('\n'))), i = i._parent }b(r), m(r), H.notEnumerableProp(t, 'stack', g(n, r)), H.notEnumerableProp(t, '__stackCleaned__', !0) } }; var nt = (function () { const t = /^\s*at\s*/; const e = function (t, e) { return typeof t === 'string' ? t : void 0 !== e.name && void 0 !== e.message ? e.toString() : F(e) }; if (typeof Error.stackTraceLimit === 'number' && typeof Error.captureStackTrace === 'function') { Error.stackTraceLimit += 6, B = t, M = e; const n = Error.captureStackTrace; return tt = function (t) { return U.test(t) }, function (t, e) { Error.stackTraceLimit += 6, n(t, e), Error.stackTraceLimit -= 6 } } const r = new Error(); if (typeof r.stack === 'string' && r.stack.split('\n')[0].includes('stackDetection@')) { return B = /@/, M = e, q = !0, function (t) { t.stack = (new Error()).stack } } let i; try { throw new Error() } catch (o) { i = 'stack' in o } return 'stack' in r || !i || typeof Error.stackTraceLimit !== 'number' ? (M = function (t, e) { return typeof t === 'string' ? t : typeof e !== 'object' && typeof e !== 'function' || void 0 === e.name || void 0 === e.message ? F(e) : e.toString() }, null) : (B = t, M = e, function (t) { Error.stackTraceLimit += 6; try { throw new Error() } catch (e) { t.stack = e.stack }Error.stackTraceLimit -= 6 }) }([])); typeof console !== 'undefined' && typeof console.warn !== 'undefined' && (D = function (t) { console.warn(t) }, H.isNode && process.stderr.isTTY ? D = function (t, e) { const n = e ? '[33m' : '[31m'; console.warn(n + t + '[0m\n') } : H.isNode || typeof (new Error()).stack !== 'string' || (D = function (t, e) { console.warn('%c' + t, e ? 'color: darkorange' : 'color: red') })); var rt = { warnings: $, longStackTraces: !1, cancellation: !1, monitoring: !1 }; return G && e.longStackTraces(), { longStackTraces () { return rt.longStackTraces }, warnings () { return rt.warnings }, cancellation () { return rt.cancellation }, monitoring () { return rt.monitoring }, propagateFromFunction () { return Z }, boundValueFunction () { return h }, checkForgottenReturns: d, setBounds: P, warn: y, deprecated: v, CapturedTrace: O, fireDomEvent: W, fireGlobalEvent: K } } }, { './errors': 12, './util': 36 }],
    10: [function (t, e, n) { 'use strict'; e.exports = function (t) { function e () { return this.value } function n () { throw this.reason }t.prototype.return = t.prototype.thenReturn = function (n) { return n instanceof t && n.suppressUnhandledRejections(), this._then(e, void 0, void 0, { value: n }, void 0) }, t.prototype.throw = t.prototype.thenThrow = function (t) { return this._then(n, void 0, void 0, { reason: t }, void 0) }, t.prototype.catchThrow = function (t) { if (arguments.length <= 1) { return this._then(void 0, n, void 0, { reason: t }, void 0) } const e = arguments[1]; const r = function () { throw e }; return this.caught(t, r) }, t.prototype.catchReturn = function (n) { if (arguments.length <= 1) { return n instanceof t && n.suppressUnhandledRejections(), this._then(void 0, e, void 0, { value: n }, void 0) } const r = arguments[1]; r instanceof t && r.suppressUnhandledRejections(); const i = function () { return r }; return this.caught(n, i) } } }, {}],
    11: [function (t, e, n) { 'use strict'; e.exports = function (t, e) { function n () { return o(this) } function r (t, n) { return i(t, n, e, e) } var i = t.reduce; var o = t.all; t.prototype.each = function (t) { return this.mapSeries(t)._then(n, void 0, void 0, this, void 0) }, t.prototype.mapSeries = function (t) { return i(this, t, e, e) }, t.each = function (t, e) { return r(t, e)._then(n, void 0, void 0, t, void 0) }, t.mapSeries = r } }, {}],
    12: [function (t, e, n) { 'use strict'; function r (t, e) { function n (r) { return this instanceof n ? (p(this, 'message', typeof r === 'string' ? r : e), p(this, 'name', t), void (Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : Error.call(this))) : new n(r) } return u(n, Error), n } function i (t) { return this instanceof i ? (p(this, 'name', 'OperationalError'), p(this, 'message', t), this.cause = t, this.isOperational = !0, void (t instanceof Error ? (p(this, 'message', t.message), p(this, 'stack', t.stack)) : Error.captureStackTrace && Error.captureStackTrace(this, this.constructor))) : new i(t) } let o; let s; const a = t('./es5'); const c = a.freeze; const l = t('./util'); var u = l.inherits; var p = l.notEnumerableProp; const h = r('Warning', 'warning'); const f = r('CancellationError', 'cancellation error'); const _ = r('TimeoutError', 'timeout error'); const d = r('AggregateError', 'aggregate error'); try { o = TypeError, s = RangeError } catch (v) { o = r('TypeError', 'type error'), s = r('RangeError', 'range error') } for (let y = 'join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse'.split(' '), g = 0; g < y.length; ++g) { typeof Array.prototype[y[g]] === 'function' && (d.prototype[y[g]] = Array.prototype[y[g]]) } a.defineProperty(d.prototype, 'length', { value: 0, configurable: !1, writable: !0, enumerable: !0 }), d.prototype.isOperational = !0; let m = 0; d.prototype.toString = function () { let t = Array(4 * m + 1).join(' '); let e = '\n' + t + 'AggregateError of:\n'; m++, t = Array(4 * m + 1).join(' '); for (let n = 0; n < this.length; ++n) { for (var r = this[n] === this ? '[Circular AggregateError]' : this[n] + '', i = r.split('\n'), o = 0; o < i.length; ++o) { i[o] = t + i[o] }r = i.join('\n'), e += r + '\n' } return m--, e }, u(i, Error); let b = Error.__BluebirdErrorTypes__; b || (b = c({ CancellationError: f, TimeoutError: _, OperationalError: i, RejectionError: i, AggregateError: d }), a.defineProperty(Error, '__BluebirdErrorTypes__', { value: b, writable: !1, enumerable: !1, configurable: !1 })), e.exports = { Error, TypeError: o, RangeError: s, CancellationError: b.CancellationError, OperationalError: b.OperationalError, TimeoutError: b.TimeoutError, AggregateError: b.AggregateError, Warning: h } }, { './es5': 13, './util': 36 }],
    13: [function (t, e, n) { const r = (function () { 'use strict'; return void 0 === this }()); if (r) { e.exports = { freeze: Object.freeze, defineProperty: Object.defineProperty, getDescriptor: Object.getOwnPropertyDescriptor, keys: Object.keys, names: Object.getOwnPropertyNames, getPrototypeOf: Object.getPrototypeOf, isArray: Array.isArray, isES5: r, propertyIsWritable (t, e) { const n = Object.getOwnPropertyDescriptor(t, e); return !(n && !n.writable && !n.set) } } } else { const i = {}.hasOwnProperty; const o = {}.toString; const s = {}.constructor.prototype; const a = function (t) { const e = []; for (const n in t) { i.call(t, n) && e.push(n) } return e }; const c = function (t, e) { return { value: t[e] } }; const l = function (t, e, n) { return t[e] = n.value, t }; const u = function (t) { return t }; const p = function (t) { try { return Object(t).constructor.prototype } catch (e) { return s } }; const h = function (t) { try { return o.call(t) === '[object Array]' } catch (e) { return !1 } }; e.exports = { isArray: h, keys: a, names: a, defineProperty: l, getDescriptor: c, freeze: u, getPrototypeOf: p, isES5: r, propertyIsWritable () { return !0 } } } }, {}],
    14: [function (t, e, n) { 'use strict'; e.exports = function (t, e) { const n = t.map; t.prototype.filter = function (t, r) { return n(this, t, r, e) }, t.filter = function (t, r, i) { return n(t, r, i, e) } } }, {}],
    15: [function (t, e, n) { 'use strict'; e.exports = function (e, n) { function r (t, e, n) { this.promise = t, this.type = e, this.handler = n, this.called = !1, this.cancelPromise = null } function i (t) { this.finallyHandler = t } function o (t, e) { return t.cancelPromise != null ? (arguments.length > 1 ? t.cancelPromise._reject(e) : t.cancelPromise._cancel(), t.cancelPromise = null, !0) : !1 } function s () { return c.call(this, this.promise._target()._settledValue()) } function a (t) { return o(this, t) ? void 0 : (p.e = t, p) } function c (t) { const r = this.promise; const c = this.handler; if (!this.called) { this.called = !0; const l = this.isFinallyHandler() ? c.call(r._boundValue()) : c.call(r._boundValue(), t); if (void 0 !== l) { r._setReturnedNonUndefined(); const h = n(l, r); if (h instanceof e) { if (this.cancelPromise != null) { if (h.isCancelled()) { const f = new u('late cancellation observer'); return r._attachExtraTrace(f), p.e = f, p }h.isPending() && h._attachCancellationCallback(new i(this)) } return h._then(s, a, void 0, this, void 0) } } } return r.isRejected() ? (o(this), p.e = t, p) : (o(this), t) } const l = t('./util'); var u = e.CancellationError; var p = l.errorObj; return r.prototype.isFinallyHandler = function () { return this.type === 0 }, i.prototype._resultCancelled = function () { o(this.finallyHandler) }, e.prototype._passThrough = function (t, e, n, i) { return typeof t !== 'function' ? this.then() : this._then(n, i, void 0, new r(this, e, t), void 0) }, e.prototype.lastly = e.prototype.finally = function (t) { return this._passThrough(t, 0, c, c) }, e.prototype.tap = function (t) { return this._passThrough(t, 1, c) }, r } }, { './util': 36 }],
    16: [function (t, e, n) { 'use strict'; e.exports = function (e, n, r, i, o, s) { function a (t, n, r) { for (let o = 0; o < n.length; ++o) { r._pushContext(); const s = f(n[o])(t); if (r._popContext(), s === h) { r._pushContext(); const a = e.reject(h.e); return r._popContext(), a } const c = i(s, r); if (c instanceof e) { return c } } return null } function c (t, n, i, o) { const s = this._promise = new e(r); s._captureStackTrace(), s._setOnCancel(this), this._stack = o, this._generatorFunction = t, this._receiver = n, this._generator = void 0, this._yieldHandlers = typeof i === 'function' ? [i].concat(_) : _, this._yieldedPromise = null } const l = t('./errors'); const u = l.TypeError; const p = t('./util'); var h = p.errorObj; var f = p.tryCatch; var _ = []; p.inherits(c, o), c.prototype._isResolved = function () { return this._promise === null }, c.prototype._cleanup = function () { this._promise = this._generator = null }, c.prototype._promiseCancelled = function () { if (!this._isResolved()) { let t; const n = typeof this._generator.return !== 'undefined'; if (n) { this._promise._pushContext(), t = f(this._generator.return).call(this._generator, void 0), this._promise._popContext() } else { const r = new e.CancellationError('generator .return() sentinel'); e.coroutine.returnSentinel = r, this._promise._attachExtraTrace(r), this._promise._pushContext(), t = f(this._generator.throw).call(this._generator, r), this._promise._popContext(), t === h && t.e === r && (t = null) } const i = this._promise; this._cleanup(), t === h ? i._rejectCallback(t.e, !1) : i.cancel() } }, c.prototype._promiseFulfilled = function (t) { this._yieldedPromise = null, this._promise._pushContext(); const e = f(this._generator.next).call(this._generator, t); this._promise._popContext(), this._continue(e) }, c.prototype._promiseRejected = function (t) { this._yieldedPromise = null, this._promise._attachExtraTrace(t), this._promise._pushContext(); const e = f(this._generator.throw).call(this._generator, t); this._promise._popContext(), this._continue(e) }, c.prototype._resultCancelled = function () { if (this._yieldedPromise instanceof e) { const t = this._yieldedPromise; this._yieldedPromise = null, this._promiseCancelled(), t.cancel() } }, c.prototype.promise = function () { return this._promise }, c.prototype._run = function () { this._generator = this._generatorFunction.call(this._receiver), this._receiver = this._generatorFunction = void 0, this._promiseFulfilled(void 0) }, c.prototype._continue = function (t) { const n = this._promise; if (t === h) { return this._cleanup(), n._rejectCallback(t.e, !1) } const r = t.value; if (t.done === !0) { return this._cleanup(), n._resolveCallback(r) } let o = i(r, this._promise); if (!(o instanceof e) && (o = a(o, this._yieldHandlers, this._promise), o === null)) { return void this._promiseRejected(new u('A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n'.replace('%s', r) + 'From coroutine:\n' + this._stack.split('\n').slice(1, -7).join('\n'))) } o = o._target(); const s = o._bitField; (50397184 & s) === 0 ? (this._yieldedPromise = o, o._proxy(this, null)) : (33554432 & s) !== 0 ? this._promiseFulfilled(o._value()) : (16777216 & s) !== 0 ? this._promiseRejected(o._reason()) : this._promiseCancelled() }, e.coroutine = function (t, e) { if (typeof t !== 'function') { throw new u('generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n') } const n = Object(e).yieldHandler; const r = c; const i = (new Error()).stack; return function () { const e = t.apply(this, arguments); const o = new r(void 0, void 0, n, i); const s = o.promise(); return o._generator = e, o._promiseFulfilled(void 0), s } }, e.coroutine.addYieldHandler = function (t) { if (typeof t !== 'function') { throw new u('expecting a function but got ' + p.classString(t)) } _.push(t) }, e.spawn = function (t) { if (s.deprecated('Promise.spawn()', 'Promise.coroutine()'), typeof t !== 'function') { return n('generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n') } const r = new c(t, this); const i = r.promise(); return r._run(e.spawn), i } } }, { './errors': 12, './util': 36 }],
    17: [function (t, e, n) { 'use strict'; e.exports = function (e, n, r, i) { const o = t('./util'); o.canEvaluate, o.tryCatch, o.errorObj; e.join = function () { let t; const e = arguments.length - 1; if (e > 0 && typeof arguments[e] === 'function') { t = arguments[e]; var r } const i = [].slice.call(arguments); t && i.pop(); var r = new n(i).promise(); return void 0 !== t ? r.spread(t) : r } } }, { './util': 36 }],
    18: [function (t, e, n) {
      'use strict'; e.exports = function (e, n, r, i, o, s) {
        function a (t, e, n, r) { this.constructor$(t), this._promise._captureStackTrace(); const i = l(); this._callback = i === null ? e : i.bind(e), this._preservedValues = r === o ? new Array(this.length()) : null, this._limit = n, this._inFlight = 0, this._queue = n >= 1 ? [] : f, this._init$(void 0, -2) } function c (t, e, n, i) { if (typeof e !== 'function') { return r('expecting a function but got ' + u.classString(e)) } let o = typeof n === 'object' && n !== null ? n.concurrency : 0; return o = typeof o === 'number' && isFinite(o) && o >= 1 ? o : 0, new a(t, e, o, i).promise() } var l = e._getDomain; var u = t('./util'); const p = u.tryCatch; const h = u.errorObj; var f = []; u.inherits(a, n), a.prototype._init = function () {}, a.prototype._promiseFulfilled = function (t, n) {
          const r = this._values; const o = this.length(); const a = this._preservedValues; const c = this._limit; if (n < 0) { if (n = -1 * n - 1, r[n] = t, c >= 1 && (this._inFlight--, this._drainQueue(), this._isResolved())) { return !0 } } else { if (c >= 1 && this._inFlight >= c) { return r[n] = t, this._queue.push(n), !1 } a !== null && (a[n] = t); const l = this._promise; const u = this._callback; const f = l._boundValue(); l._pushContext(); let _ = p(u).call(f, t, n, o); const d = l._popContext(); if (s.checkForgottenReturns(_, d, a !== null ? 'Promise.filter' : 'Promise.map', l), _ === h) { return this._reject(_.e), !0 } let v = i(_, this._promise); if (v instanceof e) { v = v._target(); const y = v._bitField; if ((50397184 & y) === 0) { return c >= 1 && this._inFlight++, r[n] = v, v._proxy(this, -1 * (n + 1)), !1 } if ((33554432 & y) === 0) { return (16777216 & y) !== 0 ? (this._reject(v._reason()), !0) : (this._cancel(), !0) } _ = v._value() }r[n] = _ } const g = ++this._totalResolved; return g >= o ? (a !== null ? this._filter(r, a) : this._resolve(r), !0) : !1
        }, a.prototype._drainQueue = function () { for (let t = this._queue, e = this._limit, n = this._values; t.length > 0 && this._inFlight < e;) { if (this._isResolved()) { return } const r = t.pop(); this._promiseFulfilled(n[r], r) } }, a.prototype._filter = function (t, e) { for (var n = e.length, r = new Array(n), i = 0, o = 0; n > o; ++o) { t[o] && (r[i++] = e[o]) }r.length = i, this._resolve(r) }, a.prototype.preservedValues = function () { return this._preservedValues }, e.prototype.map = function (t, e) { return c(this, t, e, null) }, e.map = function (t, e, n, r) { return c(t, e, n, r) }
      }
    }, { './util': 36 }],
    19: [function (t, e, n) { 'use strict'; e.exports = function (e, n, r, i, o) { const s = t('./util'); const a = s.tryCatch; e.method = function (t) { if (typeof t !== 'function') { throw new e.TypeError('expecting a function but got ' + s.classString(t)) } return function () { const r = new e(n); r._captureStackTrace(), r._pushContext(); const i = a(t).apply(this, arguments); const s = r._popContext(); return o.checkForgottenReturns(i, s, 'Promise.method', r), r._resolveFromSyncValue(i), r } }, e.attempt = e.try = function (t) { if (typeof t !== 'function') { return i('expecting a function but got ' + s.classString(t)) } const r = new e(n); r._captureStackTrace(), r._pushContext(); let c; if (arguments.length > 1) { o.deprecated('calling Promise.try with more than 1 argument'); const l = arguments[1]; const u = arguments[2]; c = s.isArray(l) ? a(t).apply(u, l) : a(t).call(u, l) } else { c = a(t)() } const p = r._popContext(); return o.checkForgottenReturns(c, p, 'Promise.try', r), r._resolveFromSyncValue(c), r }, e.prototype._resolveFromSyncValue = function (t) { t === s.errorObj ? this._rejectCallback(t.e, !1) : this._resolveCallback(t, !0) } } }, { './util': 36 }],
    20: [function (t, e, n) { 'use strict'; function r (t) { return t instanceof Error && u.getPrototypeOf(t) === Error.prototype } function i (t) { let e; if (r(t)) { e = new l(t), e.name = t.name, e.message = t.message, e.stack = t.stack; for (let n = u.keys(t), i = 0; i < n.length; ++i) { const o = n[i]; p.test(o) || (e[o] = t[o]) } return e } return s.markAsOriginatingFromRejection(t), t } function o (t, e) { return function (n, r) { if (t !== null) { if (n) { const o = i(a(n)); t._attachExtraTrace(o), t._reject(o) } else if (e) { const s = [].slice.call(arguments, 1); t._fulfill(s) } else { t._fulfill(r) }t = null } } } var s = t('./util'); var a = s.maybeWrapAsError; const c = t('./errors'); var l = c.OperationalError; var u = t('./es5'); var p = /^(?:name|message|stack|cause)$/; e.exports = o }, { './errors': 12, './es5': 13, './util': 36 }],
    21: [function (t, e, n) { 'use strict'; e.exports = function (e) { function n (t, e) { const n = this; if (!o.isArray(t)) { return r.call(n, t, e) } const i = a(e).apply(n._boundValue(), [null].concat(t)); i === c && s.throwLater(i.e) } function r (t, e) { const n = this; const r = n._boundValue(); const i = void 0 === t ? a(e).call(r, null) : a(e).call(r, null, t); i === c && s.throwLater(i.e) } function i (t, e) { const n = this; if (!t) { const r = new Error(t + ''); r.cause = t, t = r } const i = a(e).call(n._boundValue(), t); i === c && s.throwLater(i.e) } var o = t('./util'); var s = e._async; var a = o.tryCatch; var c = o.errorObj; e.prototype.asCallback = e.prototype.nodeify = function (t, e) { if (typeof t === 'function') { let o = r; void 0 !== e && Object(e).spread && (o = n), this._then(o, i, void 0, this, t) } return this } } }, { './util': 36 }],
    22: [function (t, e, n) { 'use strict'; e.exports = function () { function e () {} function n (t, e) { if (typeof e !== 'function') { throw new y('expecting a function but got ' + h.classString(e)) } if (t.constructor !== r) { throw new y('the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n') } } function r (t) { this._bitField = 0, this._fulfillmentHandler0 = void 0, this._rejectionHandler0 = void 0, this._promise0 = void 0, this._receiver0 = void 0, t !== m && (n(this, t), this._resolveFromExecutor(t)), this._promiseCreated(), this._fireEvent('promiseCreated', this) } function i (t) { this.promise._resolveCallback(t) } function o (t) { this.promise._rejectCallback(t, !1) } function s (t) { const e = new r(m); e._fulfillmentHandler0 = t, e._rejectionHandler0 = t, e._promise0 = t, e._receiver0 = t } let a; const c = function () { return new y('circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n') }; const l = function () { return new r.PromiseInspection(this._target()) }; const u = function (t) { return r.reject(new y(t)) }; const p = {}; var h = t('./util'); a = h.isNode ? function () { let t = process.domain; return void 0 === t && (t = null), t } : function () { return null }, h.notEnumerableProp(r, '_getDomain', a); const f = t('./es5'); const _ = t('./async'); const d = new _(); f.defineProperty(r, '_async', { value: d }); const v = t('./errors'); var y = r.TypeError = v.TypeError; r.RangeError = v.RangeError; const g = r.CancellationError = v.CancellationError; r.TimeoutError = v.TimeoutError, r.OperationalError = v.OperationalError, r.RejectionError = v.OperationalError, r.AggregateError = v.AggregateError; var m = function () {}; const b = {}; const w = {}; const C = t('./thenables')(r, m); const j = t('./promise_array')(r, m, C, u, e); const k = t('./context')(r); const E = k.create; const F = t('./debuggability')(r, k); const x = (F.CapturedTrace, t('./finally')(r, C)); const T = t('./catch_filter')(w); const R = t('./nodeback'); const P = h.errorObj; const O = h.tryCatch; return r.prototype.toString = function () { return '[object Promise]' }, r.prototype.caught = r.prototype.catch = function (t) { const e = arguments.length; if (e > 1) { let n; const r = new Array(e - 1); let i = 0; for (n = 0; e - 1 > n; ++n) { const o = arguments[n]; if (!h.isObject(o)) { return u('expecting an object but got ' + h.classString(o)) } r[i++] = o } return r.length = i, t = arguments[n], this.then(void 0, T(r, t, this)) } return this.then(void 0, t) }, r.prototype.reflect = function () { return this._then(l, l, void 0, this, void 0) }, r.prototype.then = function (t, e) { if (F.warnings() && arguments.length > 0 && typeof t !== 'function' && typeof e !== 'function') { let n = '.then() only accepts functions but was passed: ' + h.classString(t); arguments.length > 1 && (n += ', ' + h.classString(e)), this._warn(n) } return this._then(t, e, void 0, void 0, void 0) }, r.prototype.done = function (t, e) { const n = this._then(t, e, void 0, void 0, void 0); n._setIsFinal() }, r.prototype.spread = function (t) { return typeof t !== 'function' ? u('expecting a function but got ' + h.classString(t)) : this.all()._then(t, void 0, void 0, b, void 0) }, r.prototype.toJSON = function () { const t = { isFulfilled: !1, isRejected: !1, fulfillmentValue: void 0, rejectionReason: void 0 }; return this.isFulfilled() ? (t.fulfillmentValue = this.value(), t.isFulfilled = !0) : this.isRejected() && (t.rejectionReason = this.reason(), t.isRejected = !0), t }, r.prototype.all = function () { return arguments.length > 0 && this._warn('.all() was passed arguments but it does not take any'), new j(this).promise() }, r.prototype.error = function (t) { return this.caught(h.originatesFromRejection, t) }, r.is = function (t) { return t instanceof r }, r.fromNode = r.fromCallback = function (t) { const e = new r(m); e._captureStackTrace(); const n = arguments.length > 1 ? !!Object(arguments[1]).multiArgs : !1; const i = O(t)(R(e, n)); return i === P && e._rejectCallback(i.e, !0), e._isFateSealed() || e._setAsyncGuaranteed(), e }, r.all = function (t) { return new j(t).promise() }, r.cast = function (t) { let e = C(t); return e instanceof r || (e = new r(m), e._captureStackTrace(), e._setFulfilled(), e._rejectionHandler0 = t), e }, r.resolve = r.fulfilled = r.cast, r.reject = r.rejected = function (t) { const e = new r(m); return e._captureStackTrace(), e._rejectCallback(t, !0), e }, r.setScheduler = function (t) { if (typeof t !== 'function') { throw new y('expecting a function but got ' + h.classString(t)) } const e = d._schedule; return d._schedule = t, e }, r.prototype._then = function (t, e, n, i, o) { const s = void 0 !== o; const c = s ? o : new r(m); const l = this._target(); const u = l._bitField; s || (c._propagateFrom(this, 3), c._captureStackTrace(), void 0 === i && (2097152 & this._bitField) !== 0 && (i = (50397184 & u) !== 0 ? this._boundValue() : l === this ? void 0 : this._boundTo), this._fireEvent('promiseChained', this, c)); const p = a(); if ((50397184 & u) !== 0) { let h; let f; let _ = l._settlePromiseCtx; (33554432 & u) !== 0 ? (f = l._rejectionHandler0, h = t) : (16777216 & u) !== 0 ? (f = l._fulfillmentHandler0, h = e, l._unsetRejectionIsUnhandled()) : (_ = l._settlePromiseLateCancellationObserver, f = new g('late cancellation observer'), l._attachExtraTrace(f), h = e), d.invoke(_, l, { handler: p === null ? h : typeof h === 'function' && p.bind(h), promise: c, receiver: i, value: f }) } else { l._addCallbacks(t, e, c, i, p) } return c }, r.prototype._length = function () { return 65535 & this._bitField }, r.prototype._isFateSealed = function () { return (117506048 & this._bitField) !== 0 }, r.prototype._isFollowing = function () { return (67108864 & this._bitField) === 67108864 }, r.prototype._setLength = function (t) { this._bitField = -65536 & this._bitField | 65535 & t }, r.prototype._setFulfilled = function () { this._bitField = 33554432 | this._bitField, this._fireEvent('promiseFulfilled', this) }, r.prototype._setRejected = function () { this._bitField = 16777216 | this._bitField, this._fireEvent('promiseRejected', this) }, r.prototype._setFollowing = function () { this._bitField = 67108864 | this._bitField, this._fireEvent('promiseResolved', this) }, r.prototype._setIsFinal = function () { this._bitField = 4194304 | this._bitField }, r.prototype._isFinal = function () { return (4194304 & this._bitField) > 0 }, r.prototype._unsetCancelled = function () { this._bitField = -65537 & this._bitField }, r.prototype._setCancelled = function () { this._bitField = 65536 | this._bitField, this._fireEvent('promiseCancelled', this) }, r.prototype._setAsyncGuaranteed = function () { this._bitField = 134217728 | this._bitField }, r.prototype._receiverAt = function (t) { const e = t === 0 ? this._receiver0 : this[4 * t - 4 + 3]; return e === p ? void 0 : void 0 === e && this._isBound() ? this._boundValue() : e }, r.prototype._promiseAt = function (t) { return this[4 * t - 4 + 2] }, r.prototype._fulfillmentHandlerAt = function (t) { return this[4 * t - 4 + 0] }, r.prototype._rejectionHandlerAt = function (t) { return this[4 * t - 4 + 1] }, r.prototype._boundValue = function () {}, r.prototype._migrateCallback0 = function (t) { const e = (t._bitField, t._fulfillmentHandler0); const n = t._rejectionHandler0; const r = t._promise0; let i = t._receiverAt(0); void 0 === i && (i = p), this._addCallbacks(e, n, r, i, null) }, r.prototype._migrateCallbackAt = function (t, e) { const n = t._fulfillmentHandlerAt(e); const r = t._rejectionHandlerAt(e); const i = t._promiseAt(e); let o = t._receiverAt(e); void 0 === o && (o = p), this._addCallbacks(n, r, i, o, null) }, r.prototype._addCallbacks = function (t, e, n, r, i) { let o = this._length(); if (o >= 65531 && (o = 0, this._setLength(0)), o === 0) { this._promise0 = n, this._receiver0 = r, typeof t === 'function' && (this._fulfillmentHandler0 = i === null ? t : i.bind(t)), typeof e === 'function' && (this._rejectionHandler0 = i === null ? e : i.bind(e)) } else { const s = 4 * o - 4; this[s + 2] = n, this[s + 3] = r, typeof t === 'function' && (this[s + 0] = i === null ? t : i.bind(t)), typeof e === 'function' && (this[s + 1] = i === null ? e : i.bind(e)) } return this._setLength(o + 1), o }, r.prototype._proxy = function (t, e) { this._addCallbacks(void 0, void 0, e, t, null) }, r.prototype._resolveCallback = function (t, e) { if ((117506048 & this._bitField) === 0) { if (t === this) { return this._rejectCallback(c(), !1) } const n = C(t, this); if (!(n instanceof r)) { return this._fulfill(t) } e && this._propagateFrom(n, 2); const i = n._target(); if (i === this) { return void this._reject(c()) } const o = i._bitField; if ((50397184 & o) === 0) { const s = this._length(); s > 0 && i._migrateCallback0(this); for (let a = 1; s > a; ++a) { i._migrateCallbackAt(this, a) } this._setFollowing(), this._setLength(0), this._setFollowee(i) } else if ((33554432 & o) !== 0) { this._fulfill(i._value()) } else if ((16777216 & o) !== 0) { this._reject(i._reason()) } else { const l = new g('late cancellation observer'); i._attachExtraTrace(l), this._reject(l) } } }, r.prototype._rejectCallback = function (t, e, n) { const r = h.ensureErrorObject(t); const i = r === t; if (!i && !n && F.warnings()) { const o = 'a promise was rejected with a non-error: ' + h.classString(t); this._warn(o, !0) } this._attachExtraTrace(r, e ? i : !1), this._reject(t) }, r.prototype._resolveFromExecutor = function (t) { const e = this; this._captureStackTrace(), this._pushContext(); let n = !0; const r = this._execute(t, function (t) { e._resolveCallback(t) }, function (t) { e._rejectCallback(t, n) }); n = !1, this._popContext(), void 0 !== r && e._rejectCallback(r, !0) }, r.prototype._settlePromiseFromHandler = function (t, e, n, r) { let i = r._bitField; if ((65536 & i) === 0) { r._pushContext(); let o; e === b ? n && typeof n.length === 'number' ? o = O(t).apply(this._boundValue(), n) : (o = P, o.e = new y('cannot .spread() a non-array: ' + h.classString(n))) : o = O(t).call(e, n); const s = r._popContext(); i = r._bitField, (65536 & i) === 0 && (o === w ? r._reject(n) : o === P ? r._rejectCallback(o.e, !1) : (F.checkForgottenReturns(o, s, '', r, this), r._resolveCallback(o))) } }, r.prototype._target = function () { for (var t = this; t._isFollowing();) { t = t._followee() } return t }, r.prototype._followee = function () { return this._rejectionHandler0 }, r.prototype._setFollowee = function (t) { this._rejectionHandler0 = t }, r.prototype._settlePromise = function (t, n, i, o) { const s = t instanceof r; const a = this._bitField; const c = (134217728 & a) !== 0; (65536 & a) !== 0 ? (s && t._invokeInternalOnCancel(), i instanceof x && i.isFinallyHandler() ? (i.cancelPromise = t, O(n).call(i, o) === P && t._reject(P.e)) : n === l ? t._fulfill(l.call(i)) : i instanceof e ? i._promiseCancelled(t) : s || t instanceof j ? t._cancel() : i.cancel()) : typeof n === 'function' ? s ? (c && t._setAsyncGuaranteed(), this._settlePromiseFromHandler(n, i, o, t)) : n.call(i, o, t) : i instanceof e ? i._isResolved() || ((33554432 & a) !== 0 ? i._promiseFulfilled(o, t) : i._promiseRejected(o, t)) : s && (c && t._setAsyncGuaranteed(), (33554432 & a) !== 0 ? t._fulfill(o) : t._reject(o)) }, r.prototype._settlePromiseLateCancellationObserver = function (t) { const e = t.handler; const n = t.promise; const i = t.receiver; const o = t.value; typeof e === 'function' ? n instanceof r ? this._settlePromiseFromHandler(e, i, o, n) : e.call(i, o, n) : n instanceof r && n._reject(o) }, r.prototype._settlePromiseCtx = function (t) { this._settlePromise(t.promise, t.handler, t.receiver, t.value) }, r.prototype._settlePromise0 = function (t, e, n) { const r = this._promise0; const i = this._receiverAt(0); this._promise0 = void 0, this._receiver0 = void 0, this._settlePromise(r, t, i, e) }, r.prototype._clearCallbackDataAtIndex = function (t) { const e = 4 * t - 4; this[e + 2] = this[e + 3] = this[e + 0] = this[e + 1] = void 0 }, r.prototype._fulfill = function (t) { const e = this._bitField; if (!((117506048 & e) >>> 16)) { if (t === this) { const n = c(); return this._attachExtraTrace(n), this._reject(n) } this._setFulfilled(), this._rejectionHandler0 = t, (65535 & e) > 0 && ((134217728 & e) !== 0 ? this._settlePromises() : d.settlePromises(this)) } }, r.prototype._reject = function (t) { const e = this._bitField; if (!((117506048 & e) >>> 16)) { return this._setRejected(), this._fulfillmentHandler0 = t, this._isFinal() ? d.fatalError(t, h.isNode) : void ((65535 & e) > 0 ? d.settlePromises(this) : this._ensurePossibleRejectionHandled()) } }, r.prototype._fulfillPromises = function (t, e) { for (let n = 1; t > n; n++) { const r = this._fulfillmentHandlerAt(n); const i = this._promiseAt(n); const o = this._receiverAt(n); this._clearCallbackDataAtIndex(n), this._settlePromise(i, r, o, e) } }, r.prototype._rejectPromises = function (t, e) { for (let n = 1; t > n; n++) { const r = this._rejectionHandlerAt(n); const i = this._promiseAt(n); const o = this._receiverAt(n); this._clearCallbackDataAtIndex(n), this._settlePromise(i, r, o, e) } }, r.prototype._settlePromises = function () { const t = this._bitField; const e = 65535 & t; if (e > 0) { if ((16842752 & t) !== 0) { const n = this._fulfillmentHandler0; this._settlePromise0(this._rejectionHandler0, n, t), this._rejectPromises(e, n) } else { const r = this._rejectionHandler0; this._settlePromise0(this._fulfillmentHandler0, r, t), this._fulfillPromises(e, r) } this._setLength(0) } this._clearCancellationData() }, r.prototype._settledValue = function () { const t = this._bitField; return (33554432 & t) !== 0 ? this._rejectionHandler0 : (16777216 & t) !== 0 ? this._fulfillmentHandler0 : void 0 }, r.defer = r.pending = function () { F.deprecated('Promise.defer', 'new Promise'); const t = new r(m); return { promise: t, resolve: i, reject: o } }, h.notEnumerableProp(r, '_makeSelfResolutionError', c), t('./method')(r, m, C, u, F), t('./bind')(r, m, C, F), t('./cancel')(r, j, u, F), t('./direct_resolve')(r), t('./synchronous_inspection')(r), t('./join')(r, j, C, m, F), r.Promise = r, t('./map.js')(r, j, u, C, m, F), t('./using.js')(r, u, C, E, m, F), t('./timers.js')(r, m, F), t('./generators.js')(r, u, m, C, e, F), t('./nodeify.js')(r), t('./call_get.js')(r), t('./props.js')(r, j, C, u), t('./race.js')(r, m, C, u), t('./reduce.js')(r, j, u, C, m, F), t('./settle.js')(r, j, F), t('./some.js')(r, j, u), t('./promisify.js')(r, m), t('./any.js')(r), t('./each.js')(r, m), t('./filter.js')(r, m), h.toFastProperties(r), h.toFastProperties(r.prototype), s({ a: 1 }), s({ b: 2 }), s({ c: 3 }), s(1), s(function () {}), s(void 0), s(!1), s(new r(m)), F.setBounds(_.firstLineError, h.lastLineError), r } }, { './any.js': 1, './async': 2, './bind': 3, './call_get.js': 5, './cancel': 6, './catch_filter': 7, './context': 8, './debuggability': 9, './direct_resolve': 10, './each.js': 11, './errors': 12, './es5': 13, './filter.js': 14, './finally': 15, './generators.js': 16, './join': 17, './map.js': 18, './method': 19, './nodeback': 20, './nodeify.js': 21, './promise_array': 23, './promisify.js': 24, './props.js': 25, './race.js': 27, './reduce.js': 28, './settle.js': 30, './some.js': 31, './synchronous_inspection': 32, './thenables': 33, './timers.js': 34, './using.js': 35, './util': 36 }],
    23: [function (t, e, n) { 'use strict'; e.exports = function (e, n, r, i, o) { function s (t) { switch (t) { case -2:return []; case -3:return {} } } function a (t) { const r = this._promise = new e(n); t instanceof e && r._propagateFrom(t, 3), r._setOnCancel(this), this._values = t, this._length = 0, this._totalResolved = 0, this._init(void 0, -2) } const c = t('./util'); c.isArray; return c.inherits(a, o), a.prototype.length = function () { return this._length }, a.prototype.promise = function () { return this._promise }, a.prototype._init = function l (t, n) { let o = r(this._values, this._promise); if (o instanceof e) { o = o._target(); const a = o._bitField; if (this._values = o, (50397184 & a) === 0) { return this._promise._setAsyncGuaranteed(), o._then(l, this._reject, void 0, this, n) } if ((33554432 & a) === 0) { return (16777216 & a) !== 0 ? this._reject(o._reason()) : this._cancel() } o = o._value() } if (o = c.asArray(o), o === null) { const u = i('expecting an array or an iterable object but got ' + c.classString(o)).reason(); return void this._promise._rejectCallback(u, !1) } return o.length === 0 ? void (n === -5 ? this._resolveEmptyArray() : this._resolve(s(n))) : void this._iterate(o) }, a.prototype._iterate = function (t) { const n = this.getActualLength(t.length); this._length = n, this._values = this.shouldCopyValues() ? new Array(n) : this._values; for (var i = this._promise, o = !1, s = null, a = 0; n > a; ++a) { let c = r(t[a], i); c instanceof e ? (c = c._target(), s = c._bitField) : s = null, o ? s !== null && c.suppressUnhandledRejections() : s !== null ? (50397184 & s) === 0 ? (c._proxy(this, a), this._values[a] = c) : o = (33554432 & s) !== 0 ? this._promiseFulfilled(c._value(), a) : (16777216 & s) !== 0 ? this._promiseRejected(c._reason(), a) : this._promiseCancelled(a) : o = this._promiseFulfilled(c, a) }o || i._setAsyncGuaranteed() }, a.prototype._isResolved = function () { return this._values === null }, a.prototype._resolve = function (t) { this._values = null, this._promise._fulfill(t) }, a.prototype._cancel = function () { !this._isResolved() && this._promise.isCancellable() && (this._values = null, this._promise._cancel()) }, a.prototype._reject = function (t) { this._values = null, this._promise._rejectCallback(t, !1) }, a.prototype._promiseFulfilled = function (t, e) { this._values[e] = t; const n = ++this._totalResolved; return n >= this._length ? (this._resolve(this._values), !0) : !1 }, a.prototype._promiseCancelled = function () { return this._cancel(), !0 }, a.prototype._promiseRejected = function (t) { return this._totalResolved++, this._reject(t), !0 }, a.prototype._resultCancelled = function () { if (!this._isResolved()) { const t = this._values; if (this._cancel(), t instanceof e) { t.cancel() } else { for (let n = 0; n < t.length; ++n) { t[n] instanceof e && t[n].cancel() } } } }, a.prototype.shouldCopyValues = function () { return !0 }, a.prototype.getActualLength = function (t) { return t }, a } }, { './util': 36 }],
    24: [function (t, e, n) { 'use strict'; e.exports = function (e, n) { function r (t) { return !C.test(t) } function i (t) { try { return t.__isPromisified__ === !0 } catch (e) { return !1 } } function o (t, e, n) { const r = f.getDataPropertyOrDefault(t, e + n, b); return r ? i(r) : !1 } function s (t, e, n) { for (let r = 0; r < t.length; r += 2) { const i = t[r]; if (n.test(i)) { for (let o = i.replace(n, ''), s = 0; s < t.length; s += 2) { if (t[s] === o) { throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace('%s', e)) } } } } } function a (t, e, n, r) { for (var a = f.inheritedDataKeys(t), c = [], l = 0; l < a.length; ++l) { const u = a[l]; const p = t[u]; const h = r === j ? !0 : j(u, p, t); typeof p !== 'function' || i(p) || o(t, u, e) || !r(u, p, t, h) || c.push(u, p) } return s(c, e, n), c } function c (t, r, i, o, s, a) { function c () { let i = r; r === h && (i = this); const o = new e(n); o._captureStackTrace(); const s = typeof u === 'string' && this !== l ? this[u] : t; const c = _(o, a); try { s.apply(i, d(arguments, c)) } catch (p) { o._rejectCallback(v(p), !0, !0) } return o._isFateSealed() || o._setAsyncGuaranteed(), o } var l = (function () { return this }()); var u = t; return typeof u === 'string' && (t = o), f.notEnumerableProp(c, '__isPromisified__', !0), c } function l (t, e, n, r, i) { for (let o = new RegExp(k(e) + '$'), s = a(t, e, o, n), c = 0, l = s.length; l > c; c += 2) { var u = s[c]; var p = s[c + 1]; const _ = u + e; if (r === E) { t[_] = E(u, h, u, p, e, i) } else { const d = r(p, function () { return E(u, h, u, p, e, i) }); f.notEnumerableProp(d, '__isPromisified__', !0), t[_] = d } } return f.toFastProperties(t), t } function u (t, e, n) { return E(t, e, void 0, t, null, n) } let p; var h = {}; var f = t('./util'); var _ = t('./nodeback'); var d = f.withAppended; var v = f.maybeWrapAsError; const y = f.canEvaluate; var g = t('./errors').TypeError; const m = 'Async'; var b = { __isPromisified__: !0 }; const w = ['arity', 'length', 'name', 'arguments', 'caller', 'callee', 'prototype', '__isPromisified__']; var C = new RegExp('^(?:' + w.join('|') + ')$'); var j = function (t) { return f.isIdentifier(t) && t.charAt(0) !== '_' && t !== 'constructor' }; var k = function (t) { return t.replace(/([$])/, '\\$') }; var E = y ? p : c; e.promisify = function (t, e) { if (typeof t !== 'function') { throw new g('expecting a function but got ' + f.classString(t)) } if (i(t)) { return t } e = Object(e); const n = void 0 === e.context ? h : e.context; const o = !!e.multiArgs; const s = u(t, n, o); return f.copyDescriptors(t, s, r), s }, e.promisifyAll = function (t, e) { if (typeof t !== 'function' && typeof t !== 'object') { throw new g('the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n') } e = Object(e); const n = !!e.multiArgs; let r = e.suffix; typeof r !== 'string' && (r = m); let i = e.filter; typeof i !== 'function' && (i = j); let o = e.promisifier; if (typeof o !== 'function' && (o = E), !f.isIdentifier(r)) { throw new RangeError('suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n') } for (let s = f.inheritedDataKeys(t), a = 0; a < s.length; ++a) { const c = t[s[a]]; s[a] !== 'constructor' && f.isClass(c) && (l(c.prototype, r, i, o, n), l(c, r, i, o, n)) } return l(t, r, i, o, n) } } }, { './errors': 12, './nodeback': 20, './util': 36 }],
    25: [function (t, e, n) { 'use strict'; e.exports = function (e, n, r, i) { function o (t) { let e; let n = !1; if (void 0 !== a && t instanceof a) { e = p(t), n = !0 } else { const r = u.keys(t); const i = r.length; e = new Array(2 * i); for (let o = 0; i > o; ++o) { const s = r[o]; e[o] = t[s], e[o + i] = s } } this.constructor$(e), this._isMap = n, this._init$(void 0, -3) } function s (t) { let n; const s = r(t); return l(s) ? (n = s instanceof e ? s._then(e.props, void 0, void 0, void 0, void 0) : new o(s).promise(), s instanceof e && n._propagateFrom(s, 2), n) : i('cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n') } let a; const c = t('./util'); var l = c.isObject; var u = t('./es5'); typeof Map === 'function' && (a = Map); var p = (function () { function t (t, r) { this[e] = t, this[e + n] = r, e++ } var e = 0; var n = 0; return function (r) { n = r.size, e = 0; const i = new Array(2 * r.size); return r.forEach(t, i), i } }()); const h = function (t) { for (var e = new a(), n = t.length / 2 | 0, r = 0; n > r; ++r) { const i = t[n + r]; const o = t[r]; e.set(i, o) } return e }; c.inherits(o, n), o.prototype._init = function () {}, o.prototype._promiseFulfilled = function (t, e) { this._values[e] = t; const n = ++this._totalResolved; if (n >= this._length) { let r; if (this._isMap) { r = h(this._values) } else { r = {}; for (let i = this.length(), o = 0, s = this.length(); s > o; ++o) { r[this._values[o + i]] = this._values[o] } } return this._resolve(r), !0 } return !1 }, o.prototype.shouldCopyValues = function () { return !1 }, o.prototype.getActualLength = function (t) { return t >> 1 }, e.prototype.props = function () { return s(this) }, e.props = function (t) { return s(t) } } }, { './es5': 13, './util': 36 }],
    26: [function (t, e, n) { 'use strict'; function r (t, e, n, r, i) { for (let o = 0; i > o; ++o) { n[o + r] = t[o + e], t[o + e] = void 0 } } function i (t) { this._capacity = t, this._length = 0, this._front = 0 }i.prototype._willBeOverCapacity = function (t) { return this._capacity < t }, i.prototype._pushOne = function (t) { const e = this.length(); this._checkCapacity(e + 1); const n = this._front + e & this._capacity - 1; this[n] = t, this._length = e + 1 }, i.prototype._unshiftOne = function (t) { const e = this._capacity; this._checkCapacity(this.length() + 1); const n = this._front; const r = (n - 1 & e - 1 ^ e) - e; this[r] = t, this._front = r, this._length = this.length() + 1 }, i.prototype.unshift = function (t, e, n) { this._unshiftOne(n), this._unshiftOne(e), this._unshiftOne(t) }, i.prototype.push = function (t, e, n) { const r = this.length() + 3; if (this._willBeOverCapacity(r)) { return this._pushOne(t), this._pushOne(e), void this._pushOne(n) } const i = this._front + r - 3; this._checkCapacity(r); const o = this._capacity - 1; this[i + 0 & o] = t, this[i + 1 & o] = e, this[i + 2 & o] = n, this._length = r }, i.prototype.shift = function () { const t = this._front; const e = this[t]; return this[t] = void 0, this._front = t + 1 & this._capacity - 1, this._length--, e }, i.prototype.length = function () { return this._length }, i.prototype._checkCapacity = function (t) { this._capacity < t && this._resizeTo(this._capacity << 1) }, i.prototype._resizeTo = function (t) { const e = this._capacity; this._capacity = t; const n = this._front; const i = this._length; const o = n + i & e - 1; r(this, 0, this, e, o) }, e.exports = i }, {}],
    27: [function (t, e, n) { 'use strict'; e.exports = function (e, n, r, i) { function o (t, o) { const c = r(t); if (c instanceof e) { return a(c) } if (t = s.asArray(t), t === null) { return i('expecting an array or an iterable object but got ' + s.classString(t)) } const l = new e(n); void 0 !== o && l._propagateFrom(o, 3); for (let u = l._fulfill, p = l._reject, h = 0, f = t.length; f > h; ++h) { const _ = t[h]; (void 0 !== _ || h in t) && e.cast(_)._then(u, p, void 0, l, null) } return l } var s = t('./util'); var a = function (t) { return t.then(function (e) { return o(e, t) }) }; e.race = function (t) { return o(t, void 0) }, e.prototype.race = function () { return o(this, void 0) } } }, { './util': 36 }],
    28: [function (t, e, n) { 'use strict'; e.exports = function (e, n, r, i, o, s) { function a (t, n, r, i) { this.constructor$(t); const s = h(); this._fn = s === null ? n : s.bind(n), void 0 !== r && (r = e.resolve(r), r._attachCancellationCallback(this)), this._initialValue = r, this._currentCancellable = null, this._eachValues = i === o ? [] : void 0, this._promise._captureStackTrace(), this._init$(void 0, -5) } function c (t, e) { this.isFulfilled() ? e._resolve(t) : e._reject(t) } function l (t, e, n, i) { if (typeof e !== 'function') { return r('expecting a function but got ' + f.classString(e)) } const o = new a(t, e, n, i); return o.promise() } function u (t) { this.accum = t, this.array._gotAccum(t); const n = i(this.value, this.array._promise); return n instanceof e ? (this.array._currentCancellable = n, n._then(p, void 0, void 0, this, void 0)) : p.call(this, n) } function p (t) { const n = this.array; const r = n._promise; const i = _(n._fn); r._pushContext(); let o; o = void 0 !== n._eachValues ? i.call(r._boundValue(), t, this.index, this.length) : i.call(r._boundValue(), this.accum, t, this.index, this.length), o instanceof e && (n._currentCancellable = o); const a = r._popContext(); return s.checkForgottenReturns(o, a, void 0 !== n._eachValues ? 'Promise.each' : 'Promise.reduce', r), o } var h = e._getDomain; var f = t('./util'); var _ = f.tryCatch; f.inherits(a, n), a.prototype._gotAccum = function (t) { void 0 !== this._eachValues && t !== o && this._eachValues.push(t) }, a.prototype._eachComplete = function (t) { return this._eachValues.push(t), this._eachValues }, a.prototype._init = function () {}, a.prototype._resolveEmptyArray = function () { this._resolve(void 0 !== this._eachValues ? this._eachValues : this._initialValue) }, a.prototype.shouldCopyValues = function () { return !1 }, a.prototype._resolve = function (t) { this._promise._resolveCallback(t), this._values = null }, a.prototype._resultCancelled = function (t) { return t === this._initialValue ? this._cancel() : void (this._isResolved() || (this._resultCancelled$(), this._currentCancellable instanceof e && this._currentCancellable.cancel(), this._initialValue instanceof e && this._initialValue.cancel())) }, a.prototype._iterate = function (t) { this._values = t; let n; let r; const i = t.length; if (void 0 !== this._initialValue ? (n = this._initialValue, r = 0) : (n = e.resolve(t[0]), r = 1), this._currentCancellable = n, !n.isRejected()) { for (;i > r; ++r) { const o = { accum: null, value: t[r], index: r, length: i, array: this }; n = n._then(u, void 0, void 0, o, void 0) } } void 0 !== this._eachValues && (n = n._then(this._eachComplete, void 0, void 0, this, void 0)), n._then(c, c, void 0, n, this) }, e.prototype.reduce = function (t, e) { return l(this, t, e, null) }, e.reduce = function (t, e, n, r) { return l(t, e, n, r) } } }, { './util': 36 }],
    29: [function (t, e, n) { 'use strict'; let r; const i = t('./util'); const o = function () { throw new Error('No async scheduler available\n\n    See http://goo.gl/MqrFmX\n') }; if (i.isNode && typeof MutationObserver === 'undefined') { const s = global.setImmediate; const a = process.nextTick; r = i.isRecentNode ? function (t) { s.call(global, t) } : function (t) { a.call(process, t) } } else { r = typeof MutationObserver === 'undefined' || typeof window !== 'undefined' && window.navigator && window.navigator.standalone ? typeof setImmediate !== 'undefined' ? function (t) { setImmediate(t) } : typeof setTimeout !== 'undefined' ? function (t) { setTimeout(t, 0) } : o : (function () { const t = document.createElement('div'); const e = { attributes: !0 }; let n = !1; const r = document.createElement('div'); const i = new MutationObserver(function () { t.classList.toggle('foo'), n = !1 }); i.observe(r, e); const o = function () { n || (n = !0, r.classList.toggle('foo')) }; return function (n) { var r = new MutationObserver(function () { r.disconnect(), n() }); r.observe(t, e), o() } }()) }e.exports = r }, { './util': 36 }],
    30: [function (t, e, n) { 'use strict'; e.exports = function (e, n, r) { function i (t) { this.constructor$(t) } const o = e.PromiseInspection; const s = t('./util'); s.inherits(i, n), i.prototype._promiseResolved = function (t, e) { this._values[t] = e; const n = ++this._totalResolved; return n >= this._length ? (this._resolve(this._values), !0) : !1 }, i.prototype._promiseFulfilled = function (t, e) { const n = new o(); return n._bitField = 33554432, n._settledValueField = t, this._promiseResolved(e, n) }, i.prototype._promiseRejected = function (t, e) { const n = new o(); return n._bitField = 16777216, n._settledValueField = t, this._promiseResolved(e, n) }, e.settle = function (t) { return r.deprecated('.settle()', '.reflect()'), new i(t).promise() }, e.prototype.settle = function () { return e.settle(this) } } }, { './util': 36 }],
    31: [function (t, e, n) { 'use strict'; e.exports = function (e, n, r) { function i (t) { this.constructor$(t), this._howMany = 0, this._unwrap = !1, this._initialized = !1 } function o (t, e) { if ((0 | e) !== e || e < 0) { return r('expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n') } const n = new i(t); const o = n.promise(); return n.setHowMany(e), n.init(), o } const s = t('./util'); const a = t('./errors').RangeError; const c = t('./errors').AggregateError; const l = s.isArray; const u = {}; s.inherits(i, n), i.prototype._init = function () { if (this._initialized) { if (this._howMany === 0) { return void this._resolve([]) } this._init$(void 0, -5); const t = l(this._values); !this._isResolved() && t && this._howMany > this._canPossiblyFulfill() && this._reject(this._getRangeError(this.length())) } }, i.prototype.init = function () { this._initialized = !0, this._init() }, i.prototype.setUnwrap = function () { this._unwrap = !0 }, i.prototype.howMany = function () { return this._howMany }, i.prototype.setHowMany = function (t) { this._howMany = t }, i.prototype._promiseFulfilled = function (t) { return this._addFulfilled(t), this._fulfilled() === this.howMany() ? (this._values.length = this.howMany(), this.howMany() === 1 && this._unwrap ? this._resolve(this._values[0]) : this._resolve(this._values), !0) : !1 }, i.prototype._promiseRejected = function (t) { return this._addRejected(t), this._checkOutcome() }, i.prototype._promiseCancelled = function () { return this._values instanceof e || this._values == null ? this._cancel() : (this._addRejected(u), this._checkOutcome()) }, i.prototype._checkOutcome = function () { if (this.howMany() > this._canPossiblyFulfill()) { for (var t = new c(), e = this.length(); e < this._values.length; ++e) { this._values[e] !== u && t.push(this._values[e]) } return t.length > 0 ? this._reject(t) : this._cancel(), !0 } return !1 }, i.prototype._fulfilled = function () { return this._totalResolved }, i.prototype._rejected = function () { return this._values.length - this.length() }, i.prototype._addRejected = function (t) { this._values.push(t) }, i.prototype._addFulfilled = function (t) { this._values[this._totalResolved++] = t }, i.prototype._canPossiblyFulfill = function () { return this.length() - this._rejected() }, i.prototype._getRangeError = function (t) { const e = 'Input array must contain at least ' + this._howMany + ' items but contains only ' + t + ' items'; return new a(e) }, i.prototype._resolveEmptyArray = function () { this._reject(this._getRangeError(0)) }, e.some = function (t, e) { return o(t, e) }, e.prototype.some = function (t) { return o(this, t) }, e._SomePromiseArray = i } }, { './errors': 12, './util': 36 }],
    32: [function (t, e, n) {
      'use strict'; e.exports = function (t) {
        function e (t) {
          void 0 !== t ? (t = t._target(),
          this._bitField = t._bitField, this._settledValueField = t._isFateSealed() ? t._settledValue() : void 0) : (this._bitField = 0, this._settledValueField = void 0)
        }e.prototype._settledValue = function () { return this._settledValueField }; const n = e.prototype.value = function () { if (!this.isFulfilled()) { throw new TypeError('cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n') } return this._settledValue() }; const r = e.prototype.error = e.prototype.reason = function () { if (!this.isRejected()) { throw new TypeError('cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n') } return this._settledValue() }; const i = e.prototype.isFulfilled = function () { return (33554432 & this._bitField) !== 0 }; const o = e.prototype.isRejected = function () { return (16777216 & this._bitField) !== 0 }; const s = e.prototype.isPending = function () { return (50397184 & this._bitField) === 0 }; const a = e.prototype.isResolved = function () { return (50331648 & this._bitField) !== 0 }; e.prototype.isCancelled = t.prototype._isCancelled = function () { return (65536 & this._bitField) === 65536 }, t.prototype.isCancelled = function () { return this._target()._isCancelled() }, t.prototype.isPending = function () { return s.call(this._target()) }, t.prototype.isRejected = function () { return o.call(this._target()) }, t.prototype.isFulfilled = function () { return i.call(this._target()) }, t.prototype.isResolved = function () { return a.call(this._target()) }, t.prototype.value = function () { return n.call(this._target()) }, t.prototype.reason = function () { const t = this._target(); return t._unsetRejectionIsUnhandled(), r.call(t) }, t.prototype._value = function () { return this._settledValue() }, t.prototype._reason = function () { return this._unsetRejectionIsUnhandled(), this._settledValue() }, t.PromiseInspection = e
      }
    }, {}],
    33: [function (t, e, n) { 'use strict'; e.exports = function (e, n) { function r (t, r) { if (u(t)) { if (t instanceof e) { return t } const i = o(t); if (i === l) { r && r._pushContext(); var c = e.reject(i.e); return r && r._popContext(), c } if (typeof i === 'function') { if (s(t)) { var c = new e(n); return t._then(c._fulfill, c._reject, void 0, c, null), c } return a(t, i, r) } } return t } function i (t) { return t.then } function o (t) { try { return i(t) } catch (e) { return l.e = e, l } } function s (t) { return p.call(t, '_promise0') } function a (t, r, i) { function o (t) { a && (a._resolveCallback(t), a = null) } function s (t) { a && (a._rejectCallback(t, p, !0), a = null) } var a = new e(n); const u = a; i && i._pushContext(), a._captureStackTrace(), i && i._popContext(); var p = !0; const h = c.tryCatch(r).call(t, o, s); return p = !1, a && h === l && (a._rejectCallback(h.e, !0, !0), a = null), u } var c = t('./util'); var l = c.errorObj; var u = c.isObject; var p = {}.hasOwnProperty; return r } }, { './util': 36 }],
    34: [function (t, e, n) { 'use strict'; e.exports = function (e, n, r) { function i (t) { this.handle = t } function o (t) { return clearTimeout(this.handle), t } function s (t) { throw clearTimeout(this.handle), t } const a = t('./util'); const c = e.TimeoutError; i.prototype._resultCancelled = function () { clearTimeout(this.handle) }; const l = function (t) { return u(+this).thenReturn(t) }; var u = e.delay = function (t, o) { let s, a; return void 0 !== o ? (s = e.resolve(o)._then(l, null, null, t, void 0), r.cancellation() && o instanceof e && s._setOnCancel(o)) : (s = new e(n), a = setTimeout(function () { s._fulfill() }, +t), r.cancellation() && s._setOnCancel(new i(a))), s._setAsyncGuaranteed(), s }; e.prototype.delay = function (t) { return u(t, this) }; const p = function (t, e, n) { let r; r = typeof e !== 'string' ? e instanceof Error ? e : new c('operation timed out') : new c(e), a.markAsOriginatingFromRejection(r), t._attachExtraTrace(r), t._reject(r), n != null && n.cancel() }; e.prototype.timeout = function (t, e) { t = +t; let n; let a; const c = new i(setTimeout(function () { n.isPending() && p(n, e, a) }, t)); return r.cancellation() ? (a = this.then(), n = a._then(o, s, void 0, c, void 0), n._setOnCancel(c)) : n = this._then(o, s, void 0, c, void 0), n } } }, { './util': 36 }],
    35: [function (t, e, n) { 'use strict'; e.exports = function (e, n, r, i, o, s) { function a (t) { setTimeout(function () { throw t }, 0) } function c (t) { const e = r(t); return e !== t && typeof t._isDisposable === 'function' && typeof t._getDisposer === 'function' && t._isDisposable() && e._setDisposable(t._getDisposer()), e } function l (t, n) { function i () { if (s >= l) { return u._fulfill() } let o = c(t[s++]); if (o instanceof e && o._isDisposable()) { try { o = r(o._getDisposer().tryDispose(n), t.promise) } catch (p) { return a(p) } if (o instanceof e) { return o._then(i, a, null, null, null) } }i() } var s = 0; var l = t.length; var u = new e(o); return i(), u } function u (t, e, n) { this._data = t, this._promise = e, this._context = n } function p (t, e, n) { this.constructor$(t, e, n) } function h (t) { return u.isDisposer(t) ? (this.resources[this.index]._setDisposable(t), t.promise()) : t } function f (t) { this.length = t, this.promise = null, this[t - 1] = null } const _ = t('./util'); const d = t('./errors').TypeError; const v = t('./util').inherits; const y = _.errorObj; const g = _.tryCatch; u.prototype.data = function () { return this._data }, u.prototype.promise = function () { return this._promise }, u.prototype.resource = function () { return this.promise().isFulfilled() ? this.promise().value() : null }, u.prototype.tryDispose = function (t) { const e = this.resource(); const n = this._context; void 0 !== n && n._pushContext(); const r = e !== null ? this.doDispose(e, t) : null; return void 0 !== n && n._popContext(), this._promise._unsetDisposable(), this._data = null, r }, u.isDisposer = function (t) { return t != null && typeof t.resource === 'function' && typeof t.tryDispose === 'function' }, v(p, u), p.prototype.doDispose = function (t, e) { const n = this.data(); return n.call(t, t, e) }, f.prototype._resultCancelled = function () { for (let t = this.length, n = 0; t > n; ++n) { const r = this[n]; r instanceof e && r.cancel() } }, e.using = function () { let t = arguments.length; if (t < 2) { return n('you must pass at least 2 arguments to Promise.using') } let i = arguments[t - 1]; if (typeof i !== 'function') { return n('expecting a function but got ' + _.classString(i)) } let o; let a = !0; t === 2 && Array.isArray(arguments[0]) ? (o = arguments[0], t = o.length, a = !1) : (o = arguments, t--); for (var c = new f(t), p = 0; t > p; ++p) { let d = o[p]; if (u.isDisposer(d)) { const v = d; d = d.promise(), d._setDisposable(v) } else { const m = r(d); m instanceof e && (d = m._then(h, null, null, { resources: c, index: p }, void 0)) }c[p] = d } for (var b = new Array(c.length), p = 0; p < b.length; ++p) { b[p] = e.resolve(c[p]).reflect() } var w = e.all(b).then(function (t) { for (let e = 0; e < t.length; ++e) { const n = t[e]; if (n.isRejected()) { return y.e = n.error(), y } if (!n.isFulfilled()) { return void w.cancel() } t[e] = n.value() }C._pushContext(), i = g(i); const r = a ? i.apply(void 0, t) : i(t); const o = C._popContext(); return s.checkForgottenReturns(r, o, 'Promise.using', C), r }); var C = w.lastly(function () { const t = new e.PromiseInspection(w); return l(c, t) }); return c.promise = C, C._setOnCancel(c), C }, e.prototype._setDisposable = function (t) { this._bitField = 131072 | this._bitField, this._disposer = t }, e.prototype._isDisposable = function () { return (131072 & this._bitField) > 0 }, e.prototype._getDisposer = function () { return this._disposer }, e.prototype._unsetDisposable = function () { this._bitField = -131073 & this._bitField, this._disposer = void 0 }, e.prototype.disposer = function (t) { if (typeof t === 'function') { return new p(t, this, i()) } throw new d() } } }, { './errors': 12, './util': 36 }],
    36: [function (t, e, n) { 'use strict'; function r () { try { const t = x; return x = null, t.apply(this, arguments) } catch (e) { return F.e = e, F } } function i (t) { return x = t, r } function o (t) { return t == null || t === !0 || t === !1 || typeof t === 'string' || typeof t === 'number' } function s (t) { return typeof t === 'function' || typeof t === 'object' && t !== null } function a (t) { return o(t) ? new Error(v(t)) : t } function c (t, e) { let n; const r = t.length; const i = new Array(r + 1); for (n = 0; r > n; ++n) { i[n] = t[n] } return i[n] = e, i } function l (t, e, n) { if (!k.isES5) { return {}.hasOwnProperty.call(t, e) ? t[e] : void 0 } const r = Object.getOwnPropertyDescriptor(t, e); return r != null ? r.get == null && r.set == null ? r.value : n : void 0 } function u (t, e, n) { if (o(t)) { return t } const r = { value: n, configurable: !0, enumerable: !1, writable: !0 }; return k.defineProperty(t, e, r), t } function p (t) { throw t } function h (t) { try { if (typeof t === 'function') { const e = k.names(t.prototype); const n = k.isES5 && e.length > 1; const r = e.length > 0 && !(e.length === 1 && e[0] === 'constructor'); const i = O.test(t + '') && k.names(t).length > 0; if (n || r || i) { return !0 } } return !1 } catch (o) { return !1 } } function f (t) { function e () {}e.prototype = t; for (let n = 8; n--;) { new e() } return t } function _ (t) { return S.test(t) } function d (t, e, n) { for (var r = new Array(t), i = 0; t > i; ++i) { r[i] = e + i + n } return r } function v (t) { try { return t + '' } catch (e) { return '[no string representation]' } } function y (t) { return t !== null && typeof t === 'object' && typeof t.message === 'string' && typeof t.name === 'string' } function g (t) { try { u(t, 'isOperational', !0) } catch (e) {} } function m (t) { return t == null ? !1 : t instanceof Error.__BluebirdErrorTypes__.OperationalError || t.isOperational === !0 } function b (t) { return y(t) && k.propertyIsWritable(t, 'stack') } function w (t) { return {}.toString.call(t) } function C (t, e, n) { for (let r = k.names(t), i = 0; i < r.length; ++i) { const o = r[i]; if (n(o)) { try { k.defineProperty(e, o, k.getDescriptor(t, o)) } catch (s) {} } } } function j (t, e) { return I ? process.env[t] : e } var k = t('./es5'); const E = typeof navigator === 'undefined'; var F = { e: {} }; let x; const T = typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : void 0 !== this ? this : null; const R = function (t, e) { function n () { this.constructor = t, this.constructor$ = e; for (const n in e.prototype) { r.call(e.prototype, n) && n.charAt(n.length - 1) !== '$' && (this[n + '$'] = e.prototype[n]) } } var r = {}.hasOwnProperty; return n.prototype = e.prototype, t.prototype = new n(), t.prototype }; const P = (function () { const t = [Array.prototype, Object.prototype, Function.prototype]; const e = function (e) { for (let n = 0; n < t.length; ++n) { if (t[n] === e) { return !0 } } return !1 }; if (k.isES5) { const n = Object.getOwnPropertyNames; return function (t) { for (var r = [], i = Object.create(null); t != null && !e(t);) { var o; try { o = n(t) } catch (s) { return r } for (let a = 0; a < o.length; ++a) { const c = o[a]; if (!i[c]) { i[c] = !0; const l = Object.getOwnPropertyDescriptor(t, c); l != null && l.get == null && l.set == null && r.push(c) } }t = k.getPrototypeOf(t) } return r } } const r = {}.hasOwnProperty; return function (n) { if (e(n)) { return [] } const i = []; t:for (const o in n) { if (r.call(n, o)) { i.push(o) } else { for (let s = 0; s < t.length; ++s) { if (r.call(t[s], o)) { continue t } } i.push(o) } } return i } }()); var O = /this\s*\.\s*\S+\s*=/; var S = /^[a-z$_][a-z$_0-9]*$/i; const A = (function () { return 'stack' in new Error() ? function (t) { return b(t) ? t : new Error(v(t)) } : function (t) { if (b(t)) { return t } try { throw new Error(v(t)) } catch (e) { return e } } }()); let D = function (t) { return k.isArray(t) ? t : null }; if (typeof Symbol !== 'undefined' && Symbol.iterator) { const V = typeof Array.from === 'function' ? function (t) { return Array.from(t) } : function (t) { for (var e, n = [], r = t[Symbol.iterator](); !(e = r.next()).done;) { n.push(e.value) } return n }; D = function (t) { return k.isArray(t) ? t : t != null && typeof t[Symbol.iterator] === 'function' ? V(t) : null } } var I = typeof process !== 'undefined' && w(process).toLowerCase() === '[object process]'; const L = { isClass: h, isIdentifier: _, inheritedDataKeys: P, getDataPropertyOrDefault: l, thrower: p, isArray: k.isArray, asArray: D, notEnumerableProp: u, isPrimitive: o, isObject: s, isError: y, canEvaluate: E, errorObj: F, tryCatch: i, inherits: R, withAppended: c, maybeWrapAsError: a, toFastProperties: f, filledRange: d, toString: v, canAttachTrace: b, ensureErrorObject: A, originatesFromRejection: m, markAsOriginatingFromRejection: g, classString: w, copyDescriptors: C, hasDevTools: typeof chrome !== 'undefined' && chrome && typeof chrome.loadTimes === 'function', isNode: I, env: j, global: T }; L.isRecentNode = L.isNode && (function () { const t = process.versions.node.split('.').map(Number); return t[0] === 0 && t[1] > 10 || t[0] > 0 }()), L.isNode && L.toFastProperties(process); try { throw new Error() } catch (H) { L.lastLineError = H }e.exports = L }, { './es5': 13 }]
  }, {}, [4]))(4)
})), typeof window !== 'undefined' && window !== null ? window.P = window.Promise : typeof self !== 'undefined' && self !== null && (self.P = self.Promise)
